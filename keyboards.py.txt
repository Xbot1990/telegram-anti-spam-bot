# -*- coding: utf-8 -*-
from telegram import InlineKeyboardButton, InlineKeyboardMarkup
from config import TARIFFS

# ğŸ”§ Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ: Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ñ‹ Ğ½ĞµĞ´Ğ¾ÑÑ‚Ğ°ÑÑ‰Ğ¸Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸

def get_main_menu():
    """Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ"""
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("âš™ï¸ ĞĞĞ¡Ğ¢Ğ ĞĞ™ĞšĞ˜", callback_data="settings")],
        [InlineKeyboardButton("ğŸ’° Ğ¢ĞĞ Ğ˜Ğ¤Ğ«", callback_data="tariffs")],
        [InlineKeyboardButton("ğŸ“ ĞŸĞĞ”Ğ”Ğ•Ğ Ğ–ĞšĞ", callback_data="support")]
    ])

def get_tariffs_menu():
    """ĞœĞµĞ½Ñ Ñ‚Ğ°Ñ€Ğ¸Ñ„Ğ¾Ğ²"""
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("ğŸ ĞŸĞ ĞĞ‘ĞĞ«Ğ™ 30 Ğ”ĞĞ•Ğ™", callback_data="tariff_trial"),
         InlineKeyboardButton("ğŸŸ¢ Ğ¡Ğ¢ĞĞĞ”ĞĞ Ğ¢", callback_data="tariff_standard")],
        [InlineKeyboardButton("ğŸŸ¡ ĞŸĞ Ğ", callback_data="tariff_pro"),
         InlineKeyboardButton("ğŸ”´ Ğ‘Ğ˜Ğ—ĞĞ•Ğ¡", callback_data="tariff_business")],
        [InlineKeyboardButton("â—€ï¸ ĞĞĞ—ĞĞ”", callback_data="back_to_main")]
    ])

def get_tariff_details(tariff_type):
    """Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ Ñ‚Ğ°Ñ€Ğ¸Ñ„Ğ° Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼Ğ¸ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹"""
    tariff = TARIFFS[tariff_type]
    keyboard = []
    
    if tariff_type == "trial":
        keyboard.append([InlineKeyboardButton("âœ… ĞĞšĞ¢Ğ˜Ğ’Ğ˜Ğ ĞĞ’ĞĞ¢Ğ¬", callback_data="activate_trial")])
    else:
        if tariff["price_month"] > 0:
            keyboard.append([InlineKeyboardButton(f"ğŸ“† ĞœĞ•Ğ¡Ğ¯Ğ¦ â€” {tariff['price_month']}â‚½", callback_data=f"pay_{tariff_type}_month")])
    
    keyboard.append([InlineKeyboardButton("â—€ï¸ ĞĞĞ—ĞĞ” Ğš Ğ¢ĞĞ Ğ˜Ğ¤ĞĞœ", callback_data="back_to_tariffs")])
    return InlineKeyboardMarkup(keyboard)

def get_payment_methods():
    """Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ±Ñ‹ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹"""
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("ğŸ¦ Ğ¡Ğ‘Ğ•Ğ Ğ‘ĞĞĞš", callback_data="pay_sber")],
        [InlineKeyboardButton("ğŸ’³ Ğ¢Ğ˜ĞĞ¬ĞšĞĞ¤Ğ¤", callback_data="pay_tinkoff")],
        [InlineKeyboardButton("â—€ï¸ ĞĞĞ—ĞĞ”", callback_data="back_to_tariff")]
    ])

def get_settings_menu():
    """ĞœĞµĞ½Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº"""
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("ğŸ›¡ï¸ ĞĞĞ¢Ğ˜Ğ¡ĞŸĞĞœ", callback_data="setting_antispam"),
         InlineKeyboardButton("ğŸš« ĞĞĞ¢Ğ˜ĞœĞĞ¢", callback_data="setting_antimat")],
        [InlineKeyboardButton("ğŸ”— Ğ¡Ğ¡Ğ«Ğ›ĞšĞ˜", callback_data="setting_links"),
         InlineKeyboardButton("ğŸ’¬ Ğ¤Ğ›Ğ£Ğ”", callback_data="setting_flood")],
        [InlineKeyboardButton("â—€ï¸ ĞĞĞ—ĞĞ”", callback_data="back_to_main")]
    ])

def get_setting_toggle(setting_name, is_enabled):
    """ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ/Ğ²Ñ‹ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸"""
    setting_display_names = {
        "antispam": "ĞĞĞ¢Ğ˜Ğ¡ĞŸĞĞœ",
        "antimat": "ĞĞĞ¢Ğ˜ĞœĞĞ¢",
        "links": "Ğ¡Ğ¡Ğ«Ğ›ĞšĞ˜",
        "flood": "Ğ¤Ğ›Ğ£Ğ”"
    }
    display_name = setting_display_names.get(setting_name, setting_name.upper())
    button_text = f"{'âœ…' if is_enabled else 'âŒ'} {display_name}"
    callback_data = f"toggle_{setting_name}_{'off' if is_enabled else 'on'}"
    
    return InlineKeyboardMarkup([
        [InlineKeyboardButton(button_text, callback_data=callback_data)],
        [InlineKeyboardButton("â—€ï¸ ĞĞĞ—ĞĞ”", callback_data="back_to_settings")]
    ])

def get_flood_settings(current_limit=5):
    """ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ñ„Ğ»ÑƒĞ´-ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ñ"""
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("ğŸ”´ Ğ’Ğ«ĞšĞ›", callback_data="flood_off"),
         InlineKeyboardButton(f"ğŸŸ¡ {current_limit}/10ÑĞµĞº", callback_data=f"flood_{current_limit}")],
        [InlineKeyboardButton("ğŸŸ¢ 5/10ÑĞµĞº", callback_data="flood_5"),
         InlineKeyboardButton("ğŸŸ¢ 10/10ÑĞµĞº", callback_data="flood_10")],
        [InlineKeyboardButton("â—€ï¸ ĞĞĞ—ĞĞ”", callback_data="back_to_settings")]
    ])

def get_payment_confirmation_buttons(payment_id):
    """ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ/Ğ¾Ñ‚ĞºĞ»Ğ¾Ğ½ĞµĞ½Ğ¸Ñ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°"""
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("âœ… ĞŸĞĞ”Ğ¢Ğ’Ğ•Ğ Ğ”Ğ˜Ğ¢Ğ¬", callback_data=f"confirm_{payment_id}"),
         InlineKeyboardButton("âŒ ĞĞ¢ĞšĞ›ĞĞĞ˜Ğ¢Ğ¬", callback_data=f"decline_{payment_id}")],
        [InlineKeyboardButton("ğŸ” ĞŸĞ ĞĞ’Ğ•Ğ Ğ˜Ğ¢Ğ¬", callback_data=f"check_{payment_id}"),
         InlineKeyboardButton("ğŸ“Š Ğ¡Ğ¢ĞĞ¢Ğ˜Ğ¡Ğ¢Ğ˜ĞšĞ", callback_data=f"stats_{payment_id}")],
        [InlineKeyboardButton("ğŸ·ï¸ Ğ¢Ğ•Ğ“Ğ˜", callback_data=f"tags_{payment_id}"),
         InlineKeyboardButton("ğŸ¯ Ğ”Ğ•Ğ™Ğ¡Ğ¢Ğ’Ğ˜Ğ¯", callback_data=f"actions_{payment_id}")]
    ])

# ğŸ”§ ĞĞĞ’ĞĞ•: Ğ­Ñ‚Ğ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ»Ğ¸ Ğ² Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»Ğµ
def get_decline_reason_buttons(payment_id):
    """ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ñ‹ Ğ¾Ñ‚ĞºĞ»Ğ¾Ğ½ĞµĞ½Ğ¸Ñ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°"""
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("âŒ ĞĞ•Ğ’Ğ•Ğ ĞĞĞ¯ Ğ¡Ğ£ĞœĞœĞ", callback_data=f"decline_amount_{payment_id}")],
        [InlineKeyboardButton("âŒ ĞĞ•Ğ¢ ĞšĞĞœĞœĞ•ĞĞ¢ĞĞ Ğ˜Ğ¯", callback_data=f"decline_nocomment_{payment_id}")],
        [InlineKeyboardButton("âŒ ĞĞ•Ğ§Ğ˜Ğ¢ĞĞ•ĞœĞ«Ğ™ Ğ¡ĞšĞ Ğ˜Ğ", callback_data=f"decline_badscreen_{payment_id}")],
        [InlineKeyboardButton("â—€ï¸ ĞĞĞ—ĞĞ”", callback_data=f"back_to_payment_{payment_id}")]
    ])

# ğŸ”§ ĞĞĞ’ĞĞ•: Ğ­Ñ‚Ğ° Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ»Ğ°
def get_ban_full_details_buttons(user_id, group_id):
    """ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ñ… Ğ´ĞµÑ‚Ğ°Ğ»ĞµĞ¹ Ğ±Ğ°Ğ½Ğ°"""
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("ğŸ”„ Ğ ĞĞ—Ğ‘ĞĞĞ˜Ğ¢Ğ¬", callback_data=f"unban_{user_id}_{group_id}")],
        [InlineKeyboardButton("â—€ï¸ ĞĞĞ—ĞĞ”", callback_data=f"bandetails_back_{user_id}_{group_id}")]
    ])

# ğŸ”§ ĞĞĞ’ĞĞ•: Ğ­Ñ‚Ğ° Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ»Ğ°
def get_back_button(destination):
    """Ğ£Ğ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ğ°Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ° 'ĞĞ°Ğ·Ğ°Ğ´'"""
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("â—€ï¸ ĞĞĞ—ĞĞ”", callback_data=f"back_to_{destination}")]
    ])

def get_tags_menu(payment_id):
    """ĞœĞµĞ½Ñ Ñ‚ĞµĞ³Ğ¾Ğ² Ğ´Ğ»Ñ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ°"""
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("â­ ĞŸĞĞ¡Ğ¢ĞĞ¯ĞĞĞ«Ğ™", callback_data=f"tag_vip_{payment_id}")],
        [InlineKeyboardButton("âš ï¸ ĞŸĞ ĞĞ‘Ğ›Ğ•ĞœĞĞ«Ğ™", callback_data=f"tag_problem_{payment_id}")],
        [InlineKeyboardButton("â—€ï¸ ĞĞĞ—ĞĞ”", callback_data=f"back_to_payment_{payment_id}")]
    ])

def get_actions_menu(payment_id):
    """ĞœĞµĞ½Ñ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹ Ñ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¾Ğ¼"""
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("ğŸ†“ +7 Ğ”ĞĞ•Ğ™", callback_data=f"action_extend_{payment_id}")],
        [InlineKeyboardButton("ğŸ”’ Ğ‘Ğ›ĞĞšĞ˜Ğ ĞĞ’ĞĞ¢Ğ¬", callback_data=f"action_block_{payment_id}")],
        [InlineKeyboardButton("â—€ï¸ ĞĞĞ—ĞĞ”", callback_data=f"back_to_payment_{payment_id}")]
    ])

def get_ban_details_buttons(user_id, group_id):
    """ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ´Ğ»Ñ Ğ´ĞµÑ‚Ğ°Ğ»ĞµĞ¹ Ğ±Ğ°Ğ½Ğ°"""
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("ğŸ”„ Ğ ĞĞ—Ğ‘ĞĞĞ˜Ğ¢Ğ¬", callback_data=f"unban_{user_id}_{group_id}")],
        [InlineKeyboardButton("ğŸ“Š ĞŸĞĞ”Ğ ĞĞ‘ĞĞ•Ğ•", callback_data=f"bandetails_{user_id}_{group_id}")]
    ])